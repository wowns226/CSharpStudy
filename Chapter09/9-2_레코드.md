# 레코드

## 레코드 형식으로 만드는 불변 객체
* 불변 객체는 데이터를 변경할 수 없는 객체를 의미한다.
* 상태를 변경할 수 없다는 특성 때문에 불변 객체에서는 데이터 복사와 비교가 많이 이루어진다.
* 참조 형식은 클래스의 모든 필드를 `readonly`로 선언하면 불변 객체를 만들 수 있다.
* 값 형식은 `readonly struct`로 선언해야 한다.
* `값 형식` 개체는 다른 객체에 할당할 때 `깊은 복사`를 한다. 필드가 많을수록 복사 비용은 커지기 때문에 `오버헤드가 존재`한다. 하지만, `참조 형식`은 오버헤드가 존재하지 않지 않지만 `깊은 복사`를 `직접 구현`해야 한다.
  
`레코드 형식`은 값 형식처럼 다룰 수 있는 불변 참조 형식으로, 참조 형식의 비용 효율과 값 형식이 주는 편리함을 모두 제공한다.

```c#
record 레코드_이름
{
    // 프로퍼티
}
```

* [[Code]](/Code/Chapter09/Record.cs)

## with를 이용한 레코드 복사
* C# 컴파일러는 레코드 형식을 위한 복사 생성자를 자동으로 작성한다.
* 이 복사 생성자는 `protected`로 선언되기 때문에 명시적으로 호출할 수는 없으며 `with` 식을 이용해야 한다.
* [[Code]](/Code/Chapter09/WithExp.cs)

## 레코드 객체 비교하기
* 컴파일러는 레코드의 상태를 비교하는 `Equals()` 메소드를 자동으로 구현한다.
* 레코드는 참조 형식이지만 값 형식처럼 Equals() 메소드를 구현하지 않아도 비교가 가능하다.
* [[Code]](/Code/Chapter09/RecordComp.cs)